---
title: "MCP Protocol"
description: "Understanding the Model Context Protocol that connects agents to environments"
icon: "plug"
---

The Model Context Protocol (MCP) is the skeleton hud uses to provide a standard way for AI agents to interact with any software environment through tool calls.

## Why MCP?

Traditional agent frameworks couple agents tightly to specific environments. MCP decouples them:

<CardGroup cols={2}>
<Card title="Without MCP" icon="x">
  - Agent code hardcoded for each environment
  - No standardization across tools
  - Difficult to swap agents or environments
</Card>

<Card title="With MCP" icon="check">
  - Any agent works with any environment
  - Standard protocol for all interactions
  - Easy to swap components
</Card>
</CardGroup>

## How It Works

MCP standardizes agent-environment communication through JSON-RPC messages. Agents call tools exposed by environments and receive structured responses.

## Core Concepts

### Tools

[Tools](https://modelcontextprotocol.io/specification/server/tools) are functions exposed by the environment:

```json
{
  "name": "move",
  "description": "Move in a direction",
  "inputSchema": {
    "type": "object",
    "properties": {
      "direction": {
        "type": "string",
        "enum": ["up", "down", "left", "right"]
      }
    }
  }
}
```

### Tool Calls & Results

Agents [call tools](https://modelcontextprotocol.io/specification/server/tools#calling-tools) and receive results:

```python
# Agent makes a tool call
result = await client.call_tool("move", {"direction": "up"})

# Environment returns result
{
  "content": [{
    "type": "text",
    "text": "Moved up. New board state: ..."
  }]
}
```

### Lifecycle Management

MCP defines a [rigorous lifecycle](https://modelcontextprotocol.io/specification/basic/lifecycle) for connections:

1. **Initialization**: Client and server negotiate capabilities and protocol version with `client.initialize()`
2. **Operation**: Normal tool calling and message exchange
3. **Shutdown**: Clean termination of the connection

The protocol ensures both sides understand each other's capabilities before proceeding.





## HUD's MCP Extensions

HUD adds conventions on top of MCP:

1. **Setup Tools**: Initialize environment state (`setup_board`, `navigate_to_url`)
2. **Evaluate Tools**: Score agent performance (`evaluate_max_tile`, `contains_text`)
3. **Lifecycle Management**: Clean initialization and shutdown with `client.initialize()` and proper cleanup

See the [Tools Reference](/reference/tools) for implementation details.

## Transport Options

HUD environments are designed for 100% reproducibility through Docker:

<Tabs>
<Tab title="Local Docker Build">
Run environments locally for development and debugging using [stdio transport](https://modelcontextprotocol.io/specification/basic/transports#stdio):

```python
mcp_config = {
  "hud-text-2048": {
    "command": "docker",
    "args": ["run", "--rm", "-i", "hudpython/hud-text-2048:v1.2"]
  }
}
```

- **Transport**: [stdio](https://modelcontextprotocol.io/specification/basic/transports#stdio) - JSON-RPC over stdin/stdout
- **Pros**: Full control, easy debugging, no network latency
- **Use case**: Development, testing, single-agent runs

<Info>
The `-i` flag enables Docker's interactive mode, allowing stdio communication between the client and server process.
</Info>
</Tab>

<Tab title="Remote Docker Launch">
Scale to parallel runs with cloud infrastructure using [Streamable HTTP transport](https://modelcontextprotocol.io/specification/basic/transports#streamable-http):

```python
mcp_config = {
  "hud": {
    "url": "https://mcp.hud.so/v3/mcp",
    "headers": {
      "Authorization": f"Bearer {os.getenv('HUD_API_KEY')}",
      "Mcp-Image": "hudpython/hud-text-2048:v1.2"
    }
  }
}
```

- **Transport**: [Streamable HTTP](https://modelcontextprotocol.io/specification/basic/transports#streamable-http) with SSE
- **Pros**: Infinite parallelization, no local setup, managed infrastructure
- **Use case**: Benchmarks, CI/CD, multi-agent experiments

<Info>
HUD's orchestrator manages Docker containers in the cloud, exposing them via HTTP endpoints with Server-Sent Events for streaming.
</Info>
</Tab>
</Tabs>

<Check>
Both approaches use the exact same Docker image, ensuring identical behavior whether running locally or remotely
</Check>

## Next Steps

<Card title="Architecture" icon="sitemap" href="/core-concepts/architecture">
  See how HUD builds on MCP for agent evaluation
</Card>

