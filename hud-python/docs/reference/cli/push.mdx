---
title: "hud push"
description: "Share HUD environments to Docker and HUD registries"
icon: "upload"
---

The `hud push` command publishes your HUD environment to both Docker registry and HUD registry, making it available for others to use with `hud pull`.

## Usage

```bash
hud push [DIRECTORY] [OPTIONS]
```

## Arguments

<ParamField path="directory" type="string" default=".">
  Environment directory containing hud.lock.yaml
</ParamField>

## Options

<ParamField path="--image" type="string">
  Override registry image name (e.g., `myorg/myenv`). Short: `-i`
</ParamField>

<ParamField path="--tag" type="string">
  Override tag (e.g., `v1.0`, `latest`). Short: `-t`
</ParamField>

<ParamField path="--sign" type="boolean" default="false">
  Sign the image with cosign (not yet implemented)
</ParamField>

<ParamField path="--yes" type="boolean" default="false">
  Skip confirmation prompts. Short: `-y`
</ParamField>

<ParamField path="--verbose" type="boolean" default="false">
  Show detailed output. Short: `-v`
</ParamField>

## Prerequisites

<Warning>
`hud push` requires an API key. Set it via environment variable:
```bash
export HUD_API_KEY="your-api-key"
```
</Warning>

<Note>
You must be logged in to a Docker registry:
```bash
docker login
# or
docker login ghcr.io
```
</Note>

## What It Does

<Steps>
<Step title="Validate Lock File">
Reads `hud.lock.yaml` to get image reference and metadata
</Step>

<Step title="Tag for Registry">
Creates registry tag from local image:
- Uses `--image` if provided
- Auto-detects from Docker config
- Defaults to Docker Hub format
</Step>

<Step title="Push to Docker">
Pushes image to Docker registry and gets digest
</Step>

<Step title="Update Lock File">
Updates `hud.lock.yaml` with:
- Registry image reference with digest
- Push timestamp
- Registry information
</Step>

<Step title="Upload Metadata">
Sends lock file to HUD registry at:
`{HUD_API_URL}/registry/envs/{org}/{name}:{tag}`
</Step>
</Steps>

## Registry Detection

The command intelligently detects your registry:

1. **Explicit**: Use `--image` flag
   ```bash
   hud push . --image ghcr.io/myorg/myenv
   ```

2. **Docker Config**: Reads from `~/.docker/config.json`
   ```bash
   docker login ghcr.io
   hud push  # Auto-uses ghcr.io
   ```

3. **Default**: Docker Hub format
   ```bash
   hud push  # Creates: yourusername/envname
   ```

## Examples

### Basic Push

Push to default registry:

```bash
# After hud build
hud push
```

Output:
```
ðŸš€ HUD Environment Push

ðŸ“‹ Local Details
Image: hud-my-env:latest
Lock: hud.lock.yaml (2.3 KB)
Tools: 5 tools available

ðŸŽ¯ Registry Target
Local: hud-my-env:latest
Registry: myusername/my-env:latest

Push to registry? [y/N]: y

âœ… Tagged image
âœ… Pushed to registry: myusername/my-env@sha256:abc123...
âœ… Updated lock file
âœ… Metadata uploaded to HUD registry
```

### Custom Registry

Push to GitHub Container Registry:

```bash
hud push . --image ghcr.io/myorg/my-tool --tag v1.0.0
```

### CI/CD Automation

Skip prompts for automation:

```bash
hud push . --yes --tag "prod-$(date +%Y%m%d)"
```

### Override Tag

Push with different tag:

```bash
hud push . --tag experimental
```

## Lock File Updates

After pushing, `hud.lock.yaml` gains registry information:

```yaml
version: "1.0"
image: "myorg/myenv:latest@sha256:abc123..."
build:
  generatedAt: "2024-01-15T10:30:00Z"
  hudVersion: "0.1.0"
  directory: "my-env"
push:
  source: "hud-my-env:latest"
  pushedAt: "2024-01-15T11:00:00Z"
  registry: "ghcr.io"
environment:
  # ... environment details
tools:
  # ... tool information
```

## Sharing Workflows

### Public Sharing

After pushing, others can use:

```bash
# Pull with metadata preview
hud pull myorg/myenv:latest

# Use in MCP configs
{"hud": {"registry": "myorg/myenv:latest"}}

# Direct Docker usage
docker run myorg/myenv:latest
```

### Private Registries

For private registries, users need:

1. Docker registry access:
   ```bash
   docker login private-registry.com
   ```

2. HUD API key (if using private HUD registry):
   ```bash
   export HUD_API_KEY="shared-key"
   ```

## Usage Messages

After successful push, helpful usage examples are shown:

```
ðŸ“¦ Usage:

Test locally:
  hud run myorg/myenv:latest

Use in MCP configs:
  
  Claude Desktop:
    {"docker": {"image": "myorg/myenv@sha256:...", "command": "auto"}}
  
  Via HUD (recommended):
    {"hud": {"registry": "myorg/myenv:latest"}}

Share environment:
  Others can now pull with: hud pull myorg/myenv:latest
```

## Troubleshooting

### Authentication Issues

<AccordionGroup>
<Accordion title="Docker login required">
```bash
# Docker Hub
docker login

# GitHub Registry
docker login ghcr.io -u USERNAME

# Custom registry
docker login my-registry.com
```
</Accordion>

<Accordion title="HUD API key missing">
```bash
# Set API key
export HUD_API_KEY="your-key-here"

# Or create .env file
echo "HUD_API_KEY=your-key-here" > .env
```
</Accordion>

<Accordion title="Permission denied">
Ensure you have push access to the registry namespace:
- Docker Hub: Must own the namespace
- GitHub: Must have package write permissions
- Private: Check with your admin
</Accordion>
</AccordionGroup>

### Push Failures

<Tip>
For large images, push may timeout. Use `--verbose` to see progress:
```bash
hud push . --verbose
```
</Tip>

<Warning>
If metadata upload fails, the Docker image is still pushed. You can retry metadata upload or share `hud.lock.yaml` manually.
</Warning>

## Best Practices

1. **Version Tags**: Use semantic versioning
   ```bash
   hud push . --tag v1.0.0
   hud push . --tag v1.1.0-beta
   ```

2. **Namespace Organization**: Group related environments
   ```bash
   hud push . --image myorg/tools/browser
   hud push . --image myorg/tools/scraper
   ```

3. **Documentation**: Update README with pull instructions
   ```markdown
   ## Installation
   ```bash
   hud pull myorg/myenv:latest
   ```
   ```

4. **CI Integration**: Automate pushes
   ```yaml
   - name: Push HUD environment
     env:
       HUD_API_KEY: ${{ secrets.HUD_API_KEY }}
     run: hud push . --yes --tag ${{ github.ref_name }}
   ```

## Security

<Note>
The HUD registry only stores metadata (lock files), not code or images. Actual images are stored in Docker registries with their existing security models.
</Note>

- **API Keys**: Keep `HUD_API_KEY` secret
- **Registry Auth**: Use Docker's credential helpers
- **Image Signing**: Coming soon with `--sign` flag
- **Private Envs**: Use private Docker registries

## See Also

- [`hud build`](/reference/cli/build) - Build before pushing
- [`hud pull`](/reference/cli/pull) - Get shared environments
- [`hud analyze`](/reference/cli/analyze) - Inspect pushed environments
- [Build Environments](/build-environments/registry) - Registry guide
