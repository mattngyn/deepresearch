---
title: "hud run"
description: "Execute MCP environments locally or remotely for production use"
icon: "play"
---

The `hud run` command executes MCP environments either locally via Docker or remotely via the HUD platform. Unlike `hud dev` which is for development, `hud run` is optimized for production execution.

## Usage

```bash
hud run <TARGET> [OPTIONS] [-- DOCKER_ARGS...]
```

## Arguments

<ParamField path="target" type="string" required>
  Docker image reference (e.g., `myorg/env:latest`)
</ParamField>

<ParamField path="docker_args" type="array">
  Additional Docker arguments after `--` (e.g., `-e KEY=value`)
</ParamField>

<Warning>
Always use `--` before Docker arguments to avoid conflicts with HUD options:
- ✅ `hud run image:tag -- -e KEY=value`
- ❌ `hud run image:tag -e KEY=value`
</Warning>

## Options

<ParamField path="--local" type="boolean" default="false">
  Run locally with Docker instead of remote execution
</ParamField>

<ParamField path="--remote" type="boolean" default="true">
  Explicitly run remotely (default behavior)
</ParamField>

<ParamField path="--transport" type="string" default="stdio">
  Transport protocol: `stdio` or `http`. Short: `-t`
</ParamField>

<ParamField path="--port" type="integer" default="8765">
  Port for HTTP transport (ignored for stdio). Short: `-p`
</ParamField>

<ParamField path="--url" type="string" default="https://mcp.hud.so/v3/mcp">
  Remote MCP server URL
</ParamField>

<ParamField path="--api-key" type="string">
  API key for remote server (defaults to `HUD_API_KEY` env var)
</ParamField>

<ParamField path="--run-id" type="string">
  Run ID for tracking (remote only)
</ParamField>

<ParamField path="--verbose" type="boolean" default="false">
  Show detailed output. Short: `-v`
</ParamField>

## Remote Execution (Default)

By default, `hud run` executes your Docker image on the HUD platform's remote infrastructure. This provides:

- **Scalability**: Run hundreds of concurrent instances
- **Resource Management**: Automatic container lifecycle management  
- **Monitoring**: Live telemetry and performance metrics
- **Geographic Distribution**: Global edge deployment

### Remote Examples

```bash
# Basic remote execution
hud run hudpython/text-2048:latest

# With environment variables
hud run myorg/server:v1 -- -e API_KEY=secret -e DEBUG=true

# HTTP transport with custom port
hud run myorg/server:v1 --transport http --port 9000

# Custom remote URL and API key
hud run my-image:latest --url https://custom.mcp.server --api-key my-key

# With run tracking
hud run production-env:v1.0 --run-id "deploy-$(date +%Y%m%d)"
```

### Authentication

Remote execution requires authentication via API key:

```bash
# Set environment variable (recommended)
export HUD_API_KEY=your-api-key-here
hud run my-image:latest

# Or pass directly (less secure)
hud run my-image:latest --api-key your-api-key-here
```

### Run Tracking

Use `--run-id` to track specific execution instances:

```bash
hud run my-image:latest --run-id "experiment-001"
```

## Local Execution

Use `--local` to run the image locally with Docker:

```bash
# Basic local execution
hud run hudpython/text-2048:latest --local

# With Docker arguments
hud run myorg/server:v1 --local -- -e API_KEY=secret -v /data:/app/data

# HTTP transport locally
hud run myorg/server:v1 --local --transport http --port 8080

# With memory limits and volumes
hud run my-env:latest --local -- --memory 2g -v $(pwd)/data:/app/data
```

Local execution is useful for:
- Development and testing
- Environments without internet access
- Custom Docker configurations
- Debugging before remote deployment

## Transport Modes

### Stdio Transport (Default)

```bash
hud run my-image:latest --transport stdio
```

**Characteristics:**
- Direct JSON-RPC over stdin/stdout
- Single client connection
- Lower latency
- MCP protocol native

### HTTP Transport

```bash
hud run my-image:latest --transport http --port 8765
```

**Characteristics:**
- HTTP proxy at specified port
- Multiple concurrent connections
- Web-compatible
- Inspector support

## Docker Arguments

Pass Docker arguments after `--` separator:

```bash
# Environment variables
hud run my-image:latest -- -e DEBUG=true -e API_KEY=secret

# Volume mounts
hud run my-image:latest -- -v /host/data:/container/data

# Network settings
hud run my-image:latest -- --network host

# Memory limits
hud run my-image:latest -- --memory 2g

# Combined arguments
hud run my-image:latest -- -e API_KEY=secret -v /data:/app/data --memory 1g
```

<Note>
The `--` separator is required to distinguish HUD options from Docker arguments.
</Note>

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `HUD_MCP_URL` | Remote MCP server URL | `https://mcp.hud.so/v3/mcp` |
| `HUD_API_KEY` | API key for remote authentication | *required for remote* |

## Comparison with Other Commands

| Command | Purpose | Hot-reload | Target Use Case |
|---------|---------|------------|-----------------|
| `hud dev` | Development with auto-restart | ✅ Yes | Local development iteration |
| `hud run` | Production execution | ❌ No | Production workloads, testing |
| `hud debug` | Environment validation | ❌ No | Debugging and validation |

## Examples

### Basic Usage

```bash
# Run remotely (default)
hud run hudpython/text-2048:latest

# Run locally for testing
hud run hudpython/text-2048:latest --local

# Verbose output for debugging
hud run my-image:latest --local --verbose
```

### Production Deployment

```bash
# Remote execution with tracking
export HUD_API_KEY=your-production-key
hud run production-env:v1.0 --run-id "prod-deploy-$(date +%s)"

# With environment configuration
hud run production-env:v1.0 --run-id "prod-$(git rev-parse --short HEAD)" -- \
  -e DATABASE_URL=postgres://... \
  -e REDIS_URL=redis://... \
  -e LOG_LEVEL=info
```

### Development Testing

```bash
# Test locally before remote deployment
hud run my-env:dev --local -- -e DEBUG=true

# Test with HTTP transport
hud run my-env:dev --local --transport http --port 9000

# Test with custom data volume
hud run my-env:dev --local -- -v $(pwd)/test-data:/app/data
```

### CI/CD Integration

```yaml
# GitHub Actions example
- name: Run HUD environment
  env:
    HUD_API_KEY: ${{ secrets.HUD_API_KEY }}
  run: |
    # Pull latest
    hud pull myorg/env:latest --yes
    
    # Run tests
    hud run myorg/env:latest --run-id "ci-${{ github.sha }}"
```

## Error Handling

`hud run` provides clear error messages for common issues:

- **Missing image**: Suggests available images or build commands
- **Authentication failure**: Guides through API key setup
- **Port conflicts**: Suggests alternative ports
- **Docker errors**: Shows Docker-specific troubleshooting

## See Also

- [`hud pull`](/reference/cli/pull) - Get environments before running
- [`hud analyze`](/reference/cli/analyze) - Inspect capabilities first
- [`hud debug`](/reference/cli/debug) - Test environment compliance
- [`hud dev`](/reference/cli/dev) - Development with hot-reload
- [Build Environments](/build-environments) - Environment development guide